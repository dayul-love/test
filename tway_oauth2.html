<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
	</head>
<body>
        TWAY OAUTH2.0

        <form name="frm" id="frm" method="POST" action="https://ibmsso.dhitech.co.kr/mga/sps/oauth/oauth20/authorize">
            <!-- 기본 설정 -->
            <input type="hidden" name="client_id" value="gwmobiletest"/>
            <input type="hidden" name="redirect_uri" value="http://192.168.0.102:7880/ezmaru/sso/tway/oauth2.0/return"/>
            <input type="hidden" name="response_type" value="code"/>
            <input type="hidden" name="state" value=""/>
            <input type="hidden" name="scope" value=""/>
            <button type="button" id="submitButton">Submit</button>
        </form>

        <script>
            generateRandomString = function(length) {
                const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
                var result = '';
                for (let i = 0; i < length; i++) {
                    const randomIndex = Math.floor(Math.random() * characters.length);
                    result += characters.charAt(randomIndex);
                }
                return result;
            }

            document.getElementById('submitButton').addEventListener('click', function() {
                var stateInput = document.querySelector("form#frm input[name='state']");
                if (stateInput) {
                    stateInput.value = generateRandomString(20);
                }
                alert(stateInput.value);
                document.getElementById('frm').submit();
            });
        </script>

        <script>
            let sessionId = '1_2_0_appbasquX86JXl96rA4tvJOPv+2bhhDj36ZBsLwJ3RMtukEp';
            let date = new Date();
            date.setTime(date.getTime() + (1 * 24 * 60 * 60 * 1000));
            // document.cookie = "PD-S-SESSION-ID=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            document.cookie = "PD-S-SESSION-ID=" + sessionId + "; path=/; domain=ibmsso.dhitech.co.kr; SameSite=None; Secure"; //" expires=" + date.toUTCString() + 
            alert(document.cookie);
        </script>
</body>
</html>
